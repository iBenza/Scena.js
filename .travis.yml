language: ruby
rvm: 2.0.0
env:
  global:
    - GIT_COMMITTER_NAME=iBenza
    - GIT_COMMITTER_EMAIL=qeexee@i-beam.org
    - GIT_AUTHOR_NAME=iBenza
    - GIT_AUTHOR_EMAIL=qeexee@i-beam.org
    - secure: c2DI8yehTtPT0hgBC9vVLn3RBK9wQrkIESwaanYi+DINkOHZ71npE8hBDAACqc5MXuVJswvUqbJTtvEbTTI67KOjY13SDPzCLLOjf/X81+xFgg6/4ogu7NHo2VBUstfjGs76eDuY/B4gA8/Ln4UHrqlvHxOh+s3kIu0jCD0v59w=
before_script:
    - git clone --quiet https://github.com/iBenza/Scena.js build
    - pushd build
    - git checkout -b gh-pages
    - popd
script:
    - bundle exec middleman build
after_success:
    - cd build
    - git add -A
    - git commit -m 'Update'
    - '[ "$TRAVIS_BRANCH" == "master" ] && [ $GH_TOKEN ] && git push --quiet https://$GH_TOKEN@github.com/iBenza/Scena.js gh-pages 2> /dev/null'

